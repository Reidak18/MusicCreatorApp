# MusicCreator - музыкальное приложение
## Yandex Cup 2023, iOS, semi-final

![DalvadorSali](https://github.com/Reidak18/MusicCreatorApp/assets/45416667/fcd07eba-fc22-4471-a38e-6d9716e825fb)

В старости Дальвадору Сали наскучило рисовать, и он решил заняться музыкой. Но играть на каких-либо инструментах он не умел и почти отчаялся научиться.

Однажды, прогуливаясь по улочкам Мадрида и слушая звуки города, он наткнулся на маленький магазин. На его вывеске был рисунок, похожий на яблоко. Он сам не заметил, как зашёл туда.

К художнику тут же подскочил человек, и между ними завязался диалог:

— Чем я могу помочь?

— Что это у вас на витрине?

— Это смартфон, он может всё.

— И даже писать музыку?

— Конечно, только для этого потребуется специальное приложение, и мы готовы создать его для вас. На каких инструментах вы умеете играть?

— Ни на каких.

Сали расстроился, но продавец из лавки его успокоил:

— Ничего страшного, смартфоны стирают все преграды. Мы можем разработать приложение, которое будет создавать музыку по касанию, движению или даже с помощью дыхания. Выбирайте что хотите.

Вот как звучал заказ Дальвадора Сали:

— Я хочу такое устройство, с помощью которого смогу и сочинять, и играть музыку.
Помогите творцу овладеть ещё одним видом искусства.

## Условия

При всей минималистичности интерфейса приложение даёт широкие возможности: можно выбирать инструменты и управлять их звучанием, сводить вместе несколько аудиодорожек, добавлять звук с микрофона и проигрывать готовую композицию.

## Основные механики

UI приложения представлен единственным экраном, на котором находятся следующие элементы:

![interface1](https://github.com/Reidak18/MusicCreatorApp/assets/45416667/a36364f0-7ea9-419e-a9b1-1509b8a4e253)

### Выбор инструмента
С помощью этих контролов можно переключать вид инструмента, а также по лонгтапу выбирать один из нескольких вариантов. По зажатию проигрывается и выбирается семпл.

### Рабочая область для настройки звучания
Двигая пальцем по экрану, мы можем настроить громкость и скорость повторения семплов для выбранного инструмента. На макете вы видите способ управления с помощью ползунков, но можно выбрать и другой.

### Область визуализации
Здесь вы видите изображение звукового ряда, которое меняется, когда музыка играет. Например, оно может показывать изменения громкости.

### Нижняя панель инструментов
Слева находится контрол для переключения между слоями (звуковыми рядами). Справа — кнопка для записи звука с микрофона, кнопки для записи и воспроизведения трека.

Чтобы создавать музыку, нужно настроить звучание нескольких слоёв звукового ряда, который состоит из семплов определённого инструмента. Можно накладывать отдельно звук с микрофона. Например, мы можем выбрать ударный инструмент, настроить его темп и громкость. Затем добавить новый слой с гитарной партией. Затем записать поверх этого вокальную партию или даже мяуканье кота. И, когда всё готово, записываем итоговый трек, управляя через слои моментом вступления того или иного инструмента.

## Требования

- Звуки формируются в виде семплов, которые воспроизводятся в цикле с указанной скоростью повторения и громкостью. Готовые семплы можно взять из открытых библиотек или записать самостоятельно.
- Весь UI разрабатывается самостоятельно без использования сторонних библиотек. Допускаются сторонние библиотеки для обеспечения базовых механизмов, например layout или реактивного программирования.
- Приложение должно поддерживать iOS 16+, проверка будет производиться на версии 16.7.

## Необходимо реализовать следующие компоненты:
- Контролы для выбора музыкальных инструментов, управляемые с помощью жестов. Должно быть реализовано три инструмента и как минимум два варианта каждого типа: один по умолчанию плюс дополнительные.
- Рабочую область, которая позволяет сохранять настройку звучания, отображать текущее состояние и менять настройки в динамике в зависимости от положения пальца музыканта.
- Визуализацию звукового ряда. На вход можно подавать либо результаты анализа записанного звука, либо настройки звучания, по которым будет вычислена временная зависимость.
- Контрол для переключения между звуковыми слоями, а также для управления: например, для заглушения или удаления ненужных.
- Контрол и функциональность записи звука с микрофона и формирования из него звукового слоя.
- Контролы для записи и воспроизведения трека. Здесь же нужна возможность сохранить его в виде звукового файла (через функцию «Поделиться»). Длиной трека можно считать время от нажатия кнопки записи до повторного нажатия. После завершения записи можно сразу показывать меню шеринга. Как вариант, можно ещё его подвязать под лонгтап на каком-либо из контролов.

![interface2](https://github.com/Reidak18/MusicCreatorApp/assets/45416667/64b3fcbf-26b1-4fd8-aa1e-63429857053f)

Управление параметрами звучания: громкость + скорость (частота повторения семпла). На макете управление происходит с использованием ползунков. Возможны альтернативы — например, управлять, двигая пальцем по всей рабочей области.

![interface3](https://github.com/Reidak18/MusicCreatorApp/assets/45416667/6aa39687-bb67-4179-999e-c4a14f8d4222)

Анимация в визуализации аудио. На макете показан вариант, когда общий звуковой ряд выглядит как неподвижное изображение, а анимация происходит через закрашивание области, которая соответствует текущему времени. Возможны альтернативы, например анимация формы в процессе воспроизведения.

![interface4](https://github.com/Reidak18/MusicCreatorApp/assets/45416667/01f4fc6b-3d0d-4253-9667-b1b8418436df)

Выбор инструмента. При однократном нажатии выбирается инструмент по умолчанию. Можно дать подсказку пользователю, проиграв анимацию разворачивания и сворачивания меню, чтобы он знал про альтернативы. При лонгтапе меню раскрывается целиком, можно выбрать из нескольких вариантов семплов. При изменении выбора воспроизводится звук семпла. Выбранный семпл редактируется и автоматически добавляется в слои.

![interface5](https://github.com/Reidak18/MusicCreatorApp/assets/45416667/e7aa4a69-d9c0-435e-846e-151f9b0cb1a1)

Управление звуковыми рядами (слоями). Отдельные слои соответствуют своим инструментам (включая запись с микрофона). Слои можно воспроизводить по отдельности, отключать или удалять.

## License
Этот проект распространяется под лицензией [MIT License](https://github.com/Reidak18/MusicCreatorApp/blob/main/LICENSE).
